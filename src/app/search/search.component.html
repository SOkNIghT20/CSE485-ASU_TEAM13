<!-- RADIO DETAIL'S PAGE -->
<div *ngIf=" showradio && (mediaType === 'Radio' || mediaType === 'All')" class="outermost-container">
  <div class="container details-content-container">
    <div class="row">
      <div class="details-content-container col-md-6">
        <audio class='placeholder-image' controls crossorigin="anonymous">
          <source [src]="radioSource" type="audio/wav">
        </audio>
        <!--<img class='placeholder-image' src="https://i.ytimg.com/vi/NpEaa2P7qZI/maxresdefault.jpg" alt="Video Placeholder Image" />-->
      </div>
      <div class="details-content-container col-md-6">
        <h4>{{featuredDetails.Title}}</h4>
        <div class="results-line">
          <span class="results-label">Station Name:</span> {{featuredDetails.SName}}
        </div>
        <div class="results-line">
          <span class="results-label">Time Stamp:</span> {{featuredDetails.TStamp}}
        </div>

        <button type="button" class="btn btn-outline-primary" (click)="backToResults()">Back to Results</button>
        <button type="button" class="btn btn-outline-primary" (click)="createRadioSegments()">View Segments</button>
      </div>
      
      <div class="results-line">
        <span class="results-label">Content:</span> {{featuredDetails.TEXTS}}
      </div>

      <div class="caption-box">
        <div class="button-box"><button class="caption-button">Download</button><button class="caption-button">Translate</button></div>
        <div class="caption-text-box">
          <div *ngFor="let s of radioSegments; let i = index">
            <img class="clip" (click)="goToRadioSegment(s)" src="../../assets/images/placeholder.jpg" align="left" style="margin: 0px 20px 20px 0px;" /><p><b>(start at {{s}} seconds)</b> "Fourscore and seven years ago our fathers brought forth, on this continent, a new nation, conceived in liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived, and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting-place for those who here gave their lives, that that nation might live. It is altogether fitting and proper that we should do this.</p>
          </div>
        </div>
      </div>

    </div>	<!-- End class="row" -->

    <div class="row">
      <div class="col-md-12">
        <p [innerHTML]="featuredDetails.Result_Line"></p>
      </div>
    </div>
    
  </div>	<!-- End class="container details-content-container" -->
</div>

<div *ngIf='!showDetails' class="outermost-container" xmlns="http://www.w3.org/1999/html">
  <div class="container welcome-box" *ngIf="!showResults">
    <h3>DigiClips</h3>
    <h5>your personal media search engine</h5>
  </div>

  <div class="container basic-search">
    <div class="search-bar">
      <input type="text" autocomplete="my-field-name5"  class="form-control search-item" id="search-bar" [(ngModel)]="searchForm.keywords_string" (keyup.enter)="search()"
      placeholder="Search DigiClips" autofocus>
      <i (click)="search()"class="fa fa-search"></i>
    </div>

    <!-- Guest Search Counter -->
    <div *ngIf="authService.isGuestUser()" class="guest-search-counter">
      <p>Searches remaining: {{ authService.getGuestSearchesLeft() }} of 5</p>
      <button class="btn btn-primary register-btn" (click)="redirectToRegister()">
        Register for unlimited access
      </button>
    </div>

    <button (click)="toggleAdvanced()" class="advanced-toggle" type="button" class="btn">
      <ng-container *ngIf="!advanced; else advancedOptionsOn">
        More options
      </ng-container>
      <ng-template #advancedOptionsOn>
        Fewer options
      </ng-template>
    </button>

    <ng-container *ngIf="showResults">
      <button (click)="newSearch()" type="button" class="btn">New search</button>

      <button (click)="emailResults()" type="button" class="btn" >Send email</button>

      <div class="btn-group download-results">
        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Download
        </button>
        <ul class="dropdown-menu">
          <li class="dropdown-item" (click)= "generatePDF()">PDF</li>
          <li class="dropdown-item" (click)="downloadDocx()">DOCX</li>
          <li class="dropdown-item" (click)="downloadHtml()">HTML</li>
          <li class="dropdown-item" (click)="downloadXlsx()">XLSX</li>
          <div class="dropdown-divider"></div>
          <li class="dropdown-item" (click)= "downloadAll()">All formats (.zip folder)</li>
        </ul>
      </div>
    </ng-container>
  </div>	<!-- End class="container basic-search" -->
  
  <div class="container advanced-search" *ngIf="advanced">
    <div *ngIf="!showResults" class="container search-box">
      <!-- <h6>Keywords</h6><hr> -->
      <!-- <div class="row">
        <label for="search-bar" class="col-form-label right-align-label col-md-3">
          Includes all of the following
        </label>
        <input type="text" autocomplete="my-field-name4"  id="adv-search-bar" class="form-control search-item col-md-9" [(ngModel)]="searchForm.keywords_string" (keyup.enter)="search()"
          placeholder="keywords or phrases, separated by commas  [AND]" autofocus>
      </div> -->
      
      <!-- <div class="row">
        <label for="or-search-bar" class="col-form-label right-align-label col-md-3">
          Includes at least one of the following
        </label>
        <input type="text" autocomplete="my-field-name3"  id="or-search-bar" class="form-control search-item col-md-9" [(ngModel)]="searchForm.or_search_string"
          (keyup.enter)="search()" placeholder="keywords or phrases, separated by commas  [OR]">
      </div>
      
      <div class="row">
        <label for="not-search-bar" class="col-form-label right-align-label col-md-3">
          Doesn't include any of the following
        </label>
        <input type="text" autocomplete="my-field-name2"  id="not-search-bar" class="form-control search-item col-md-9" [(ngModel)]="searchForm.not_search_string"
          (keyup.enter)="search()" placeholder="keywords or phrases, separated by commas  [NOT]">
      </div>
      
      <div class="row select-group">
        <label for="language-select" class="col-form-label right-align-label col-md-3">
          Target Language
        </label>
        <select name="language-select" class="custom-select col-md-4" id="media-select" [(ngModel)]="searchForm.language">
          <option selected>English</option>
          <option>Spanish</option>
        </select>
      </div>
       -->
    </div>	<!-- class="container search-box" -->
    <!--MEDIA TYPE -->
    <div class="container search-box">
      <h6>Media Source</h6><hr class="custom-hr1">
      <!--
        TODO:
        Add Styles to <form> element for Media Types
          DO NOT MODIFY: [(ngModel)]
      -->
      <div class="row select-group media-select">
        <label for="media-select" class="col-form-label right-align-label col-md-3">
          Media Type
        </label>
        
        <div class="dropdown col-md-9">
          <button class="custom-select button-label" type="button" id="mediaTypeDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
            Select Media Types
          </button>
          <div class="dropdown-menu" aria-labelledby="mediaTypeDropdown">
            <form>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" name="media" id="media-magazine" value="Magazine" [(ngModel)]="mediaTypeHash.magazine">
                <label class="form-check-label" for="media-magazine">
                  Magazine
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" name="media" id="media-newspaper" value="Newspaper" [(ngModel)]="mediaTypeHash.newspaper">
                <label class="form-check-label" for="media-newspaper">
                  Newspaper
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" name="media" id="media-television" value="Television" [(ngModel)]="mediaTypeHash.television">
                <label class="form-check-label" for="media-television">
                  Television
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" name="media" id="media-social-media" value="Social Media" [(ngModel)]="mediaTypeHash.socialMedia">
                <label class="form-check-label" for="media-social-media">
                  Social Media
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" name="media" id="media-radio" value="Radio" [(ngModel)]="mediaTypeHash.radio">
                <label class="form-check-label" for="media-radio">
                  Radio
                </label>
              </div>
            </form><!-- End form check boxes-->

          </div> <!-- End class="dropdown-menu" -->

        </div> <!-- End class="dropdown" -->

      </div><!-- End class="row select-group" -->
      
      

      <div class="row select-group">
        <label for="denver-tv-select" class="col-form-label right-align-label col-md-3">
          TV Station
        </label>
        <select [(ngModel)]="searchForm.denverTelevision" name="denver-tv" class="custom-select col-md-3" id="denver-tv-select">
          <option selected>All</option>
          <option>Antenna</option>
          <option>GRIT</option>
          <option>KCDO</option>
          <option>KCEC-DT</option>
          <option>KCNC-TV</option>
          <option>KDEN-DT</option>
          <option>KDVR-DT</option>
          <option>KMGH-TV</option>
          <option>KSBS</option>
          <option>KTVD-DT</option>
          <option>KUSA-HD</option>
          <option>KUSA HD</option>
          <option>KWGN-DT</option>
        </select>
        <label for="newspaper-select" class="col-form-label right-align-label col-md-3">
          Newspaper
        </label>
        <select name="newspaper" class="custom-select col-md-3" id="newspaper-select" [(ngModel)]="searchForm.newspaperSelection">
          <option selected>All</option>
          <option *ngFor="let paper of newspapers">{{paper.NewspaperName}}</option>
        </select>
      </div>	<!-- End class="row select-group" -->
      
      <div class="row select-group">
        <label for="radio-select" class="col-form-label right-align-label col-md-3">
          Radio Station
        </label>
        <select name="radio" class="custom-select col-md-3" id="radio-select" [(ngModel)]="searchForm.radioSelection">
          <option selected>All</option>
          <option *ngFor="let radio of radios">{{radio.StationName}}</option>
        </select>
        <label for="magazine-select" class="col-form-label right-align-label col-md-3">
          Magazine
        </label>
        <select name="magazine" class="custom-select col-md-3" id="magazine-select" [(ngModel)]="searchForm.magazineSelection">
          <option selected>All</option>
          <option *ngFor="let mag of magazines">{{mag.MagazineName}}</option>
        </select>
      </div>
      
      <div class="row select-group">
        <label for="social-media-select" class="col-form-label right-align-label col-md-3">
          Social Media
        </label>
        <select name="social-media" class="custom-select col-md-3" id="social-media-select" [(ngModel)]="searchForm.socialMediaSelection">
          <option selected>All</option>
          <option>Youtube</option>
          <option>Twitter</option>
          <!-- <option>facebook</option>
          <option>linkedin</option> -->
        </select>
      </div>
      
      <br><h6>Geographical Location</h6><hr class="custom-hr1">
      <div class="row select-group">
        <label for="country-select" class="col-form-label right-align-label col-md-3">
          Country
        </label>
        <select name="country" class="custom-select col-md-9" id="country-select" [(ngModel)]="searchForm.country"
                (change)="updateLocationalDropdowns('country'); updateRadioDropdown(); updateNewspaperDropdown(); updateMagazineDropdown()">
          <option selected>All</option>
          <option *ngFor="let country of countries">{{country.Country}}</option>
        </select>
      </div>
      
      <div class="row select-group">
        <label for="stateProv-select" class="col-form-label right-align-label col-md-3">
          State/Province
        </label>
        <select name="state" class="custom-select col-md-3" id="stateProv-select" [(ngModel)]="searchForm.stateProv"
                (change)="updateLocationalDropdowns('state'); updateRadioDropdown(); updateNewspaperDropdown(); updateMagazineDropdown()">
          <option selected>All</option>
          <option *ngFor="let state of states">{{state.StateProvince}}</option>
        </select>
        <label for="city-select" class="col-form-label right-align-label col-md-3">
          City
        </label>
        <select name="city" class="custom-select col-md-3" id="city-select" [(ngModel)]="searchForm.city"
                (change)="updateLocationalDropdowns('city'); updateRadioDropdown(); updateNewspaperDropdown(); updateMagazineDropdown()">
          <option selected>All</option>
          <option *ngFor="let city of cities">{{city.City}}</option>
        </select>
      </div>

      <br><h6>Date and Time</h6><hr class="custom-hr1">
      <div class="row select-group">
        <label for="start-date-input" class="col-form-label right-align-label col-md-3">
          Start Date
        </label>
        <input name="startDate" class="custom-select col-md-3" type="date" placeholder="e.g. 01/01/2018" id="start-date-input" [(ngModel)]="searchForm.startDate">
        <label for="start-time-input" class="col-form-label right-align-label col-md-3">
            Start Time
        </label>
        <input name="start-time-input" class="custom-select form-control col-md-3" type="time" value="00:00" id="start-time-input"
          [(ngModel)]="searchForm.startTime">
      </div>
      
      <div class="row select-group">
        <label for="end-date-input" class="col-form-label right-align-label col-md-3">
          End Date
        </label>
        <input name="endDate" class="custom-select form-control col-md-3" type="date" placeholder="e.g. 02/22/2018" id="end-date-input" [(ngModel)]="searchForm.endDate">
        <label for="end-time-input" class="col-form-label right-align-label col-md-3">
            End Time
        </label>
        <input name="end-time-input" class="custom-select form-control col-md-3" type="time" value="23:59" id="end-time-input" [(ngModel)]="searchForm.endTime">
      </div>

      <br><h6>Number of Results</h6><hr class="custom-hr1">
      <div class="select-group row">
        <label for="results-num-select" class="col-form-label right-align-label col-md-4">
          Results to display (10-500)
        </label>
        <input type="number" min="10" max="500" id="results-num-select" class="form-control search-item col-md-8 custom-select test"  placeholder="limit: 500" [(ngModel)]="searchForm.numOfResults"
          (keyup.enter)="search()">
      </div>
      
      <br>
      <div class="row d-flex justify-content-center">
        <button id="search-btn" (click)="search()" class="btn btn-outline-primary col-md-8">Search</button>
        <span class="col-md-8 text-center">Or set up an email alert below, based on the current search configuration.</span>
        
      </div>

      <!-- Email Alert Configuration Button -->
      <div class="row d-flex justify-content-center">
        <button class="btn btn-outline-primary col-md-8" type="button" data-toggle="collapse" data-target="#emailAlertConfig" aria-expanded="false" aria-controls="emailAlertConfig">
          Email Alert Configuration
        </button>
      </div><br>


      <!-- Collapsible Email Alert Configuration Section -->
      <div class="collapse" id="emailAlertConfig">
        <div class="select-group row">
          <label for="emails-input" class="col-form-label right-align-label col-md-3">
            Recipient Email Addresses
          </label>
          <input type="text"  autocomplete="my-field-name1"  class="custom-select search-item col-md-9" placeholder="comma-separated" [(ngModel)]="searchForm.emails" id="emails-input" (keyup.enter)="sendEmail()">
        
        </div>
        
        <div class="row">
          <div class="col-md-6">

            <div class="row">
              <label for="report-format-check" class="col-form-label right-align-label col-md-6">
                Format of Reports
              </label>
              
              <form role="form" class="col-md-6">
                <div class="form-group " id="report-format-check">

                  <div class="checkbox">
                    <label>
                      <input type="checkbox" class="check" name="email" [(ngModel)]="searchForm.formatEmail"> Email
                    </label>
                  </div>
                  
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" class="check" name="formatDoc" [(ngModel)]="searchForm.formatDoc"> Doc
                    </label>
                  </div>
                  
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" class="check" name="excel" [(ngModel)]="searchForm.formatExcel"> Excel
                    </label>
                  </div>
                  
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" class="check" name="formatPDF" [(ngModel)]="searchForm.formatPDF"> PDF
                    </label>
                  </div>
                  
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" class="check" name="formatHTML" [(ngModel)]="searchForm.formatHTML"> HTML
                    </label>
                  </div>
                </div> <!-- End "form-group" id="report-format-check" -->

              </form>
            </div><!-- End class="row" --> 
          
          </div><!-- End class="col-md-6" -->


          <div class="col-md-6">
            <div class="select-group row">
              <label for="results-num-select" class="col-form-label right-align-label col-md-6">
                Number of results
              </label>
              <input type="number" min="10" max="500" id="results-num-select" class="form-control search-item col-md-6" placeholder="limit: 500" [(ngModel)]="searchForm.numOfResults" (keyup.enter)="search()">
            
            </div>
            
            <div class="select-group row">
              <label for="real-time-alerts-select" class="col-form-label right-align-label col-md-6">
                Frequency
              </label>
              <select name="real-time-alerts" [(ngModel)]="searchForm.realTimeAlerts" class="custom-select col-md-6" id="real-time-alerts-select"required>
            
                <option value="0" selected> </option>
                <option value="7">7 minutes</option>
                <option value="20">20 minutes</option>
                <option value="30">30 minutes</option>
                <option value="60">60 minutes</option>
                <option value="{{24 * 60}}">24 hours</option>
                <option value="{{7 * 24 * 60}}">7 days</option>
                <option value="{{14 * 24 * 60}}">14 days</option>
                <option value="{{30 * 24 * 60}}">30 days</option>
              </select>
            </div>
          </div><!-- End class="col-md-6" -->
        </div><!-- End class="row" -->

        <div class="row d-flex justify-content-center">
          <button id="submit-alerts-setup-btn" (click)="submitAlertSetup()" class="btn btn-outline-primary col-md-8">Submit Email Alert Configuration</button>
        </div>
      </div><!-- End collapse -->
    </div>
  </div><!--class="container advanced-search" *ngIf="advanced" -->

  <!-- SEARCH RESULTS -->
  <div *ngIf="showResults">
    <!-- Update banner ad at the top of search results -->
    <div *ngIf="showBannerAd" class="container">
      <app-ad-unit 
        [adSlot]="adService.adSlots.banner"
        [adFormat]="adService.getAdFormat('banner')"
        [width]="adService.getResponsiveAdSize('banner').width"
        [height]="adService.getResponsiveAdSize('banner').height"
        adClass="banner-ad">
      </app-ad-unit>
    </div>
    
    <div class="container results-header">
      <div *ngIf="showSpinner" class="sk-cube-grid">
        <div class="sk-cube sk-cube1"></div>
        <div class="sk-cube sk-cube2"></div>
        <div class="sk-cube sk-cube3"></div>
        <div class="sk-cube sk-cube4"></div>
        <div class="sk-cube sk-cube5"></div>
        <div class="sk-cube sk-cube6"></div>
        <div class="sk-cube sk-cube7"></div>
        <div class="sk-cube sk-cube8"></div>
        <div class="sk-cube sk-cube9"></div>
      </div>

      <!-- <button *ngIf="!showSpinner" id="floatingDownload" data-toggle="dropdown" class="btn btn-outline-primary dropdown-toggle " aria-haspopup="true" aria-expanded="false">Download {{downloadButtonText}}</button>
      <ul class="dropdown-menu checkbox-menu allow-focus">
        <li class="dropdown-item" (click)="toggleFormat($event, 'pdf')">
          <div class="checkbox">
            <label>
              <input type="checkbox" class="check" name="pdf"> PDF
            </label>
          </div>
        </li>
        <li class="dropdown-item" (click)="toggleFormat($event, 'docx')">
          <div class="checkbox">
            <label>
              <input type="checkbox" class="check" name="docx" > DOCX
            </label>
          </div>
        </li>
        <li class="dropdown-item" (click)="toggleFormat($event, 'html')">
          <div class="checkbox">
            <label>
              <input type="checkbox" class="check" name="html" > HTML
            </label>
          </div>
        </li>
        <li class="dropdown-item" (click)="toggleFormat($event, 'xlsx')">
          <div class="checkbox">
            <label>
              <input type="checkbox" class="check" name="xlsx" > XLSX
            </label>
          </div>
        </li>
        <div class="dropdown-divider"></div>
        
        <li class="dropdown-item" > <button class="btn btn-outline-primary" (click)= "downloadAll()"> All formats (.zip) </button></li>
        <li class="dropdown-item" ><button class="btn btn-outline-primary" (click)= "downloadSelected()"> Download selected </button></li>
      
      </ul> -->


      <!--Button for downloading selected sources-->
      <button
        id="floatingDownload"
        class="btn btn-outline-primary"
        (click)="downloadSelectedSources()"
      >
        {{ getDownloadButtonLabel() }}
      </button>

      <!--Button for Bookmarking selected sources-->
      <button
      id="floatingBookmark"
      class="btn btn-outline-primary"
      (click)="bookmarkSelectedSources()"
      >
        {{ getBookmarkButtonLabel() }}
      </button>

      <div *ngIf="!showSpinner && resultsReady && totalResults == 0" class="alert alert-secondary" role="alert">
        No results found.
      </div>
      <div *ngIf="error !== null" class="alert alert-danger" role="alert">
        {{error}}
      </div>
    </div>	<!-- End class="container results-header" -->

    <div class ="exportthis">
      <!-- Add a sidebar ad container that floats next to results -->
      <div class="results-container" [ngClass]="{'no-ads': !showSidebarAd}">
        <div class="results-content">
          <!--Newspaper Results Start-->
          <div *ngIf="showResults">
            
            <div class="container result-box" *ngIf="!showSpinner && newspaperResults.length > 0">
              <h3>
                <span>Newspaper Results (found: {{npResults}} limit: {{limit}})</span>
                <span *ngIf="npResultsExtra">[More than {{limit}} results available]</span>
                <div class="Padding-btn">
                  <span><button id="newsCheckAll" class="btn btn-outline-primary btn-sm float-right"
                          (click)="toggleAllNewsResults()" data-html2canvas-ignore>Select All</button></span>
                  <span><button *ngIf="isCollapsedPaper == true && !showSpinner && npResults != 0" (click)="isCollapsedPaper = !isCollapsedPaper" class="btn btn-primary btn-sm float-right">Show</button></span>
                  <span><button *ngIf="isCollapsedPaper == false && !showSpinner && npResults != 0" (click)="isCollapsedPaper = !isCollapsedPaper" class="btn btn-primary btn-sm float-right">Hide</button></span>
                </div>
              </h3>
              <hr>
              <div *ngIf=npResultsExtra class="alert alert-warning" role="alert">
                More than {{limit}} results available.
              </div>
            </div>	<!-- End class="container result-box" -->
            
            <!-- <button *ngIf="isCollapsedPaper == true && !showSpinner && npResults != 0" (click)="isCollapsedPaper = !isCollapsedPaper" class="btn btn-primary">Show</button>
            <button *ngIf="isCollapsedPaper == false && !showSpinner && npResults != 0" (click)="isCollapsedPaper = !isCollapsedPaper" class="btn btn-primary">Hide</button> -->
            
            <div *ngIf="!showSpinner" [collapse]="isCollapsedPaper" class="container result-box">
              <div class="container result-box">
                <div class="container result-box" *ngFor="let group of newspaperResults" >
                  <li style="list-style-type: none;">
                    <input
                      class="checkBox"
                      type="checkbox"
                      name="mediaResult"
                      (change)="toggleSelection({ id: group.ID, name: group.Title }, $event)"
                      data-html2canvas-ignore
                    />

                    <div class="li-text" id="{{ group.ID }}">
                      <div class="results-line-title">
                        <a href="{{ group.Link }}" target="_blank" [innerHTML]="group.Title"></a>
                      </div>
                      <div class="results-line-body">
                        <div class="results-line-subtitle">
                          <a href="{{ group.NewspaperLink }}" target="_blank">{{ group.Newspaper }}</a>
                          <span class="results-line-author" *ngIf="group.Author"> - {{ group.Author | lowercase }}</span>
                          <span class="results-line-publish-date" *ngIf="group.PublishDate">
                            - {{ group.PublishDate | date : 'MMMM d, y h:mm a' }}
                          </span>
                        </div>
                        <p [innerHTML]="group.Summary"></p>
                      </div>
                    </div>
                  </li>
                </div>	<!-- End *ngFor="let group of newspaperResults" -->
              </div>	<!-- End class="container result-box" -->
            </div> <!-- End *ngIf="!showSpinner" -->
            
          </div>	<!-- End *ngIf="mediaType == 'Newspaper' || mediaType -->

          <!-- Update ad between newspaper and magazine results (in-feed format) -->
          <div *ngIf="showBannerAd && !showSpinner && newspaperResults.length > 0 && magazineResults.length > 0" class="container">
            <app-ad-unit 
              [adSlot]="adService.adSlots.betweenResults"
              [adFormat]="adService.getAdFormat('betweenResults')"
              [layoutKey]="adService.getLayoutKey('betweenResults')"
              adClass="results-ad">
            </app-ad-unit>
          </div>

          <!--Magazine Results Start-->
          <div *ngIf="showResults">
            
            <div class="container result-box" *ngIf="!showSpinner && magazineResults.length > 0">
              <h3>
                <span>Magazine Results (found: {{mgResults}} limit: {{limit}})</span>
                <span *ngIf="mgResultsExtra">[More than {{limit}} results available]</span>
                <span><button id="magCheckAll" class="btn btn-outline-primary btn-sm float-right"
                        (click)="toggleAllMagazineResults()">Select All</button></span>
                <span><button *ngIf="isCollapsedMag == true && !showSpinner && mgResults != 0" (click)="isCollapsedMag = !isCollapsedMag" class="btn btn-primary btn-sm float-right">Show</button></span>
                <span><button *ngIf="isCollapsedMag == false && !showSpinner && mgResults != 0" (click)="isCollapsedMag = !isCollapsedMag" class="btn btn-primary btn-sm float-right">Hide</button></span>
              </h3>
              <hr>
              <div *ngIf=mgResultsExtra class="alert alert-warning" role="alert">
                More than {{limit}} results available.
              </div>
            </div>	<!-- End class="container result-box" -->
            
            <!-- <button *ngIf="isCollapsedMag == true && !showSpinner && mgResults != 0" (click)="isCollapsedMag = !isCollapsedMag" class="btn btn-primary">Show</button>
            <button *ngIf="isCollapsedMag == false && !showSpinner && mgResults != 0" (click)="isCollapsedMag = !isCollapsedMag" class="btn btn-primary">Hide</button> -->
            
            <div *ngIf="!showSpinner" [collapse]="isCollapsedMag" class="container result-box">
              
              <div class="container result-box" *ngFor="let group of magazineResults">			  
                <li>
                  <input class="checkBox" type="checkbox" name="magResult"
                       (click)="magazineIds = updateSectionIds(group.ID, 'magazine')">
                   <div class="li-text">
                     <div class="results-line-title">
                       <a href = "{{group.Link}}" target="_blank" [innerHTML]="group.Title"></a>
                     </div>
                         
                     <div class="results-line-body">
                       <div class = "results-line-subtitle">
                         <a href = "{{group.MagazineLink}}" target="_blank">{{group.Magazine}}</a>
                         <span class="results-line-author" *ngIf="group.Author"> - {{group.Author | lowercase}}</span>
                         <span class="results-line-publish-date" *ngIf="group.PublishDate">
                        - {{group.PublishDate | date : 'MMMM d, y h:mm a'}}
                         </span>
                       </div>
                       <p [innerHTML]="group.Summary"> </p>
                     </div>
                                      
                 </div>	<!-- End class="li-text" -->
                                  
                </li>
              </div> <!-- End class="container result-box" *ngFor="let group of magazineResults" -->
              
            </div>	<!-- End *ngIf="!showSpinner" [collapse]="isCollapsedMag" class="container result-box" -->
          </div>  <!-- End *ngIf="mediaType == 'Magazine' || mediaType == 'All'" -->

          <!-- Update ad between magazine and radio results (in-feed format) -->
          <div *ngIf="showBannerAd && !showSpinner && magazineResults.length > 0 && radioResults.length > 0" class="container">
            <app-ad-unit 
              [adSlot]="adService.adSlots.betweenResults"
              [adFormat]="adService.getAdFormat('betweenResults')"
              [layoutKey]="adService.getLayoutKey('betweenResults')"
              adClass="results-ad">
            </app-ad-unit>
          </div>

          <!-- Radio Results Start -->
          <div *ngIf="showResults"> <!--Newspaper Results-->
            
            <div class="container result-box" *ngIf="!showSpinner && radioResults.length > 0">
              <h3>
                <span>Radio Results (found: {{rdResults}} limit: {{limit}})</span>
                <span *ngIf="rdResultsExtra">[More than {{limit}} results available]</span>
                <div class="Padding-btn">
                  <span><button id="radioCheckAll" class="btn btn-outline-primary btn-sm float-right"
                  (click)="toggleAllRadioResults()">Select All</button></span>
                  <span><button *ngIf="isCollapsedRadio == true && !showSpinner && rdResults != 0" (click)="isCollapsedRadio = !isCollapsedRadio" class="btn btn-outline-primary btn-sm float-right">Show</button></span>
                  <span><button *ngIf="isCollapsedRadio == false && !showSpinner && rdResults != 0" (click)="isCollapsedRadio = !isCollapsedRadio" class="btn btn-outline-primary btn-sm float-right">Hide</button></span>
              </div>
              </h3>
              <hr> <br>
              <div *ngIf=rdResultsExtra class="alert alert-warning" role="alert">
                More than {{limit}} results available.
              </div>
            </div>	<!-- End class="container result-box" -->
            
            <!-- <button *ngIf="isCollapsedRadio == true && !showSpinner && rdResults != 0" (click)="isCollapsedRadio = !isCollapsedRadio" class="btn btn-primary">Show</button>
            <button *ngIf="isCollapsedRadio == false && !showSpinner && rdResults != 0" (click)="isCollapsedRadio = !isCollapsedRadio" class="btn btn-primary">Hide</button> -->
            
            <div *ngIf="!showSpinner" [collapse]="isCollapsedRadio" class="container result-box">
				
              <div class="container result-box" *ngFor="let group of radioResults">
                <li>				
                  <input class="checkBox" type="checkbox" name="radResult" value="article" (click)="radioIds = updateSectionIds(group.ID, 'radio')">
                  
                  <div class="li-text">
                    <div class="results-line-title" (click)="goToRadioDetails(group)">
                      {{group.Title}}
                    </div>
                    
                    <div class="results-line-body">
                      <div class = "results-line-subtitle">
                        <a href = "{{group.NewspaperLink}}" target="_blank">{{group.Newspaper}}</a>
                        <span class="results-line-author" *ngIf="group.Author"> - {{group.Author | lowercase}}</span>
                        <span class="results-line-publish-date" *ngIf="group.PublishDate">
                          - {{group.PublishDate | date : 'MMMM d, y h:mm a'}}
                        </span>
                      </div>
                      <p [innerHTML]="group.Summary"> </p>
                    </div>
                    
                  </div>	<!-- End class="li-text" -->
                  
                  <!-- MEDIA ANALYTICS -->
                  <div>
                    <Table class="ma-table">
                      <tr>
                        <td class="ma-cell">Nielsen Audience: <span class="value">210,14</span></td>
                        <td class="ma-cell">Ad Value: <span class="value">$67</span></td>
                        <td class="ma-cell">Calc Ad Value: <span class="value">$590</span></td>
                      </tr>
                      <tr>
                        <td class="ma-cell">Calc Publicity Value: <span class="value">$467</span></td>
                        <td class="ma-cell">Runtime: <span class="value">01:20</span></td>
                      </tr>
                    </Table>
                  </div>
                  
                </li>
                
              </div> <!-- End class="container result-box" *ngFor="let group of radioResults" -->
            </div>	<!-- End *ngIf="!showSpinner" -->
          </div>	<!-- *ngIf="mediaType == 'Radio' -->

          <!-- Update ad between radio and TV results (in-feed format) -->
          <div *ngIf="showBannerAd && !showSpinner && radioResults.length > 0 && televisionResults.length > 0" class="container">
            <app-ad-unit 
              [adSlot]="adService.adSlots.betweenResults"
              [adFormat]="adService.getAdFormat('betweenResults')"
              [layoutKey]="adService.getLayoutKey('betweenResults')"
              adClass="results-ad">
            </app-ad-unit>
          </div>

          <!-- TV Results Start -->
          <div *ngIf="showResults">
            
            <div class="container result-box" *ngIf="!showSpinner && tvResultSize > 0">
              <h3>
                <span>Television Results (found: {{tvResults}} limit: {{limit}})</span>
                <span *ngIf="tvResultsExtra">[More than {{limit}} results available]</span>

                <span><button id="tvCheckAll" class="btn btn-outline-primary btn-sm float-right"
                        (click)="toggleAllTVResults()">Select All</button></span>
                <span *ngIf="selectedVideos.length > 0"><button id="editSelected" class="btn btn-outline-primary btn-sm float-right"
                        (click)="editSelectedVideos()">Edit Selected ({{ selectedVideos.length }})</button></span>
                <span><button *ngIf="isCollapsedTv && !showSpinner && tvResults != 0" (click)="isCollapsedTv = !isCollapsedTv" class="btn btn-primary btn-sm float-right">Show</button></span>
                <span><button *ngIf="!isCollapsedTv && !showSpinner && tvResults != 0" (click)="isCollapsedTv = !isCollapsedTv" class="btn btn-primary btn-sm float-right">Hide</button></span>
              </h3>
              <hr>
              
              <div *ngIf=tvResultsExtra class="alert alert-warning" role="alert">
                More than {{limit}} results available.
              </div>
              
            </div>
            
            <div *ngIf="!showSpinner" [collapse]="isCollapsedTv" class="container result-box">
              <div class="container result-box" *ngFor="let group of televisionResults; let i=index">

              <!--RESULT START -->
                <li>
                  <input class="checkBox" type="checkbox" name="tvResult"
                  (click)="videoChecked(group.data[0], $event)">


                       <div class="li-img" (click)="goToDetails(group.data[0], i)">
                        <!-- Show Loading GIF until the thumbnail is ready -->
                        <div class="loading-container" *ngIf="!group.data[0].thumbnailLoaded">
                          <img src="https://i.gifer.com/ZKZg.gif" class="loading-gif">
                        </div>
                      
                        <!-- Video Element (Hidden while loading GIF is visible) -->
                        <video #videoPlayer 
                               [src]="group.data[0].videoSource" 
                               (loadedmetadata)="captureThumbnail(videoPlayer, group.data[0])" 
                               [class.thumbnail-loaded]="group.data[0].thumbnailLoaded"
                               style="width:100px;height:100px;">
                        </video>
                      </div>

              <!-- CLIP INFO -->
                <div class="li-text">
                  <div class="results-line-details-link" (click)="goToDetails(group.data[0], i)">
                  {{group.data[0].Channel_Name}} 
                  </div>
                  <div class="results-line">
                  Uploaded: {{ group.data[0].Created_at | date:'medium' }} 
                  ({{ getDaysSinceUpload(group.data[0].Created_at) }} days ago)
                  </div> 
                  <div class="results-line">
                    Duration: {{group.data[0].duration || 'Loading...'}}
                  </div>
                  <div class="results-line description-section">
                    <strong>Caption Match:</strong>
                    <div class="transcript-content" [innerHTML]="group.data[0].Display_Text || group.data[0].Result_Line"></div>
                  </div>
                </div>           
              <!-- MEDIA ANALYTICS -->
              </li>
            <!--Single Result End -->
            </div>	<!-- End "container result-box" *ngFor="let group of televisionResults; -->
          <!-- All Results Done-->
          </div>	<!-- End *ngIf="!showSpinner" [collapse]="isCollapsedTv" -->
        </div>	<!-- End *ngIf="mediaType == 'Television' || mediaType == 'All'" -->

        <!-- Update footer ad -->
        <div *ngIf="showFooterAd && !showSpinner && resultsReady && totalResults > 0" class="container">
          <app-ad-unit 
            [adSlot]="adService.adSlots.footer"
            [adFormat]="adService.getAdFormat('footer')"
            [width]="adService.getResponsiveAdSize('footer').width"
            [height]="adService.getResponsiveAdSize('footer').height"
            adClass="footer-ad">
          </app-ad-unit>
        </div>
      </div>
      
      <!-- Sidebar ad that sits alongside results -->
      <div *ngIf="showSidebarAd && !showSpinner && resultsReady && totalResults > 0" class="sidebar-ad-container">
        <app-ad-unit 
          [adSlot]="adService.adSlots.sidebar"
          [adFormat]="adService.getAdFormat('sidebar')"
          [width]="adService.getResponsiveAdSize('sidebar').width"
          [height]="adService.getResponsiveAdSize('sidebar').height"
          adClass="sidebar-ad">
        </app-ad-unit>
      </div>
    </div>	<!-- End class ="exportthis" -->
  </div>	<!-- End *ngIf="showResults" -->
</div>	<!-- End *ngIf='!showDetails' class="outermost-container" xmlns="http://www.w3.org/1999/html" -->

  <!--END SEARCH RESULTS -->
  
<!-- DETAIL'S PAGE -->
<div *ngIf="showDetails && (!showradio) && (mediaTypeHash.television || shouldFilter)" class="outermost-container">
  <div class="outermost-container grid-wrapper">
    <div class="container buttons-container-details">
      <button id="previousButton" type="button" class="btn prev-result" *ngIf="currentVideoIndex > 0" (click)="previousVideo()">&laquo; Previous Video</button>
      <button id="nextButton" type="button" class="btn next-result" *ngIf="currentVideoIndex < selectedVideos.length - 1" (click)="nextVideo()">Next Video &raquo;</button>
    </div>
    <div class="container details-content-container">
      <div class="channel-name">
        <h4>
          {{ featuredDetails.Channel_Name }}
          <span class="channel-date-time">
            - {{ getFormattedDate(featuredDetails.Created_at) }}
          </span>
        </h4>
      </div>                
      <div class="row">
        <div class="details-content-container col-md-6 video-container">
          <video class='placeholder-image' id="videoPlayer" controls crossorigin="anonymous">
            <source [src]=videoSource>
            <track *ngIf="ccSource" [src]="ccSource" label="Closed Caption" type="text/vtt" kind="captions" srclang="en-us" default>
           <!-- <track [src]=ccSource label="Closed Caption" type="text/vtt" kind="captions" srclang="srclang="en-us>                                                                                                            " src="ccSource" default> -->
          </video>
        
        </div>	<!-- End "details-content-container col-md-6" -->

        <div class="details-content-container col-md-6">
          <div class="results-line">
            <div class="tab-content-container">
              <!-- Tabs -->
              <ul class="nav nav-tabs d-flex justify-content-around" id="mediaTabs" role="tablist">
                  <li class="nav-item">
                      <a class="nav-link active" id="media-analytics-tab" data-toggle="tab" href="#media-analytics" role="tab" aria-controls="media-analytics" aria-selected="true">Media Analytics</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" id="editor-tab" data-toggle="tab" href="#editor" (click)="initializeVideo()">Clip Tool</a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" id="download-tab" data-toggle="tab" href="#download" role="tab" aria-controls="download" aria-selected="false">Download</a>
                  </li>
              </ul>

              <!-- Tab Content -->
              <div class="tab-content mt-3" id="mediaTabsContent">
                  <!-- Media Analytics Tab -->
              <div class="tab-pane fade show active" id="media-analytics" role="tabpanel" aria-labelledby="media-analytics-tab">
                <select id="valueSelect" name="valueSelect" class="form-select" [(ngModel)]="selectedValue">
                    <option value="audience">Audience</option>
                    <option value="ad_value">Ad Value</option>
                    <option value="calculated_ad_value">Calculated Ad Value</option>
                    <option value="calculated_publicity_value">Calculated Publicity Value</option>
                </select>
                <div *ngIf="selectedValue === 'audience'" class="chart-wrapper">
                  <canvas baseChart 
                      [datasets]="audience" 
                      [labels]="lineChartLabels" 
                      [options]="lineChartOptions"
                      [colors]="lineChartColors" 
                      [legend]="lineChartLegend" 
                      [chartType]="lineChartType" 
                      [plugins]="lineChartPlugins">
                  </canvas>
                </div>
                <div *ngIf="selectedValue === 'ad_value'" class="chart-wrapper">
                  <canvas baseChart 
                      [datasets]="adValue" 
                      [labels]="lineChartLabels" 
                      [options]="lineChartOptions"
                      [colors]="lineChartColors" 
                      [legend]="lineChartLegend" 
                      [chartType]="lineChartType" 
                      [plugins]="lineChartPlugins">
                  </canvas>
                </div>
                <div *ngIf="selectedValue === 'calculated_ad_value'" class="chart-wrapper">
                  <canvas baseChart 
                      [datasets]="calAdValue" 
                      [labels]="lineChartLabels" 
                      [options]="lineChartOptions"
                      [colors]="lineChartColors" 
                      [legend]="lineChartLegend" 
                      [chartType]="lineChartType" 
                      [plugins]="lineChartPlugins">
                  </canvas>
                </div>
                <div *ngIf="selectedValue === 'calculated_publicity_value'" class="chart-wrapper">
                  <canvas baseChart 
                      [datasets]="calPublicityValue" 
                      [labels]="lineChartLabels" 
                      [options]="lineChartOptions"
                      [colors]="lineChartColors" 
                      [legend]="lineChartLegend" 
                      [chartType]="lineChartType" 
                      [plugins]="lineChartPlugins">
                  </canvas>
                </div>
              </div>


                  <!-- Editor Tab -->
                  <div class="tab-pane fade" id="editor" role="tabpanel" aria-labelledby="editor-tab">
                    <div class="d-flex align-items-center mt-3" style="gap: 10px;">
                      <label for="playbackRate" class="mb-0" style="line-height: 1.5;">Playback Rate:</label>
                      <select id="playbackRate" class="form-select w-auto" style="height: auto;">
                        <option value="0.5">0.5x</option>
                        <option value="0.75">0.75x</option>
                        <option value="1" selected>1x</option>
                        <option value="1.25">1.25x</option>
                        <option value="1.5">1.5x</option>
                        <option value="2">2x</option>
                      </select>
                    </div>
                    <!-- Time Input Section -->
                    <div class="d-flex flex-column mt-3" style="gap: 15px;">
                      <!-- Start Time -->
                      <div class="d-flex align-items-center" style="gap: 10px;">
                        <label for="startMinutes" class="mb-0" style="line-height: 1.5;">Start Time:</label>
                        <input type="number" id="startMinutes" class="form-control" placeholder="MM" min="0" style="max-width: 20%;">
                        <span>:</span>
                        <input type="number" id="startSeconds" class="form-control" placeholder="SS" min="0" max="59" style="max-width: 20%;">
                      </div>
                      <!-- End Time -->
                      <div class="d-flex align-items-center" style="gap: 10px;">
                        <label for="endMinutes" class="mb-0" style="line-height: 1.5;">End Time:</label>
                        <input type="number" id="endMinutes" class="form-control" placeholder="MM" min="0" style="max-width: 20%;">
                        <span>:</span>
                        <input type="number" id="endSeconds" class="form-control" placeholder="SS" min="0" max="59" style="max-width: 20%;">
                      </div>
                    </div>
                    <button class="btn btn-primary mt-3" (click)="runFFMPEG()">Download</button>
                  </div>

                  <!-- Download Tab -->
                  <div class="tab-pane fade" id="download" role="tabpanel" aria-labelledby="download-tab">
                      <div class="form-group d-flex align-items-center">
                          <label class="mr-3 mb-0">File Format:</label>
                          <div class="form-check mr-3">
                              <input type="checkbox" class="form-check-input" id="mp4">
                              <label class="form-check-label" for="mp4">mp4</label>
                          </div>
                          <div class="form-check mr-3">
                              <input type="checkbox" class="form-check-input" id="mov">
                              <label class="form-check-label" for="mov">mov</label>
                          </div>
                          <div class="form-check mr-3">
                            <input type="checkbox" class="form-check-input" id="avi">
                            <label class="form-check-label" for="avi">avi</label>
                          </div>
                          <div class="form-check mr-3">
                            <input type="checkbox" class="form-check-input" id="mkv">
                            <label class="form-check-label" for="mkv">mkv</label>
                          </div>
                          <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="webm">
                            <label class="form-check-label" for="webm">webm</label>
                          </div>
                      </div>
                      
                      
                      <div class="form-check">
                          <input type="checkbox" class="form-check-input" id="saveCaptions">
                          <label class="form-check-label" for="saveCaptions">Save Captions</label>
                      </div>
                      <div class="form-check">
                          <input type="checkbox" class="form-check-input" id="saveAnalytics">
                          <label class="form-check-label" for="saveAnalytics">Save Media Analytics</label>
                      </div>
                      <button class="btn btn-primary mt-3">Export</button>
                  </div>

              </div>
          </div> <!-- div media analytics -->

            <button class="btn btn-outline-primary" (click)="goToVideoEditor()">Edit Video</button>
            <button type="button" class="btn btn-outline-primary back-to-results" (click)="backToResults()">Back to Results</button>
            <button type="button" class="btn btn-outline-dark transcript-button" (click)="toggleCaption()">{{ showCaptions ? 'Hide Transcript' : 'Show Transcript' }}</button>            
          </div> <!-- div results line -->
        </div>
      </div>

    <div id="toast" class="toast hidden"></div>
    </div> <!-- End "container details-content-container" -->

    <div [hidden]="!showCaptions" id="caption-box" class="caption-box">
      
      <!-- Button row + search bar -->
      <div class="button-box row align-items-center justify-content-between">
        
        <!-- Left: Buttons -->
        <div class="col-auto d-flex flex-wrap gap-2">
          <button class="btn btn-primary caption-button" (click)="toggleDownloadBox(1)">Clip Options</button>
          <button class="btn btn-secondary caption-button">Translate</button>
          <button class="btn btn-primary caption-button" (click)="toggleHighlight()" id="toggleHighlight">Disable Auto Highlight</button>
          <button class="btn btn-primary caption-button" (click)="toggleAutoScroll()" id="toggleAutoScroll">Disable Auto Scroll</button>
          <button hidden class="btn btn-primary caption-button" (click)="highlightSetClip()" id="highlightSetClip">Set Clip</button>
        </div>
    
        <!-- Right: Search -->
        <div class="col-auto">
          <input type="text" class="form-control" style="max-width: 250px;" placeholder="Search transcript..." (input)="searchTranscript($event.target.value)" />
        </div>
      </div>
    
      <!-- Transcript content -->
      <div class="caption-text-box">
        <div class="row">
          
          <!-- Left side: video segments -->
          <div class="col-2 segments">
            <div *ngFor="let s of videoSegments; let i = index">
              <div class="video-container">
                <div>
                  <video id="videoPlayer" width="240" height="180" crossorigin="anonymous" (click)="goToVideoSegment(s)">
                    <source [src]="videoSource">
                  </video>
                  {{videoSegmentDetail(s, i)}}
                </div>
                <div class="video-overlay">
                  <p>{{s}} seconds</p>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Right side: transcript -->
          <div class="col-9 closed-captions" id="closedCaptions">
          </div>
          
        </div>	<!-- End class="row" -->
        
      <!-- <script>videoSegmentDetail(videoSegments)</script> -->
      <!-- <script>takeScreenshots()</script> -->
      <!-- <div>{{takeScreenshots()}}</div> -->

      <!-- <div *ngFor="let s of videoSegments; let i = index">
        {{videoSegmentDetail(s, i)}}
      </div> -->
    </div>	<!-- End class="caption-text-box" -->

    <div class="download-box">
      <div ngcontent-c1="" class="search-box">
        
        <button class="x-button" (click)="toggleDownloadBox(0)">X</button>
        
        <form>
          <label for="clips">Choose the number of clips you want:</label>
          <select #myClips name="clips" id="clips" (change) = setNumClips()>
            <option default>Select a number</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </form>

        <form>
          <label for="clips">Choose the resolution you want:</label>
          <select #resolution name="resolution" id="resolution" (change) = setResolution()>
            <option default>Select a number</option>
            <option value="320:240">240p</option>
            <option value="640:480">480p</option>
            <option value="1280:720">720p</option>
            <option value="1920:1080">1080p</option>
          </select>
        </form>

        <form>
          <label for="clips">Choose the file type you want:</label>
          <select #fileFormat name="fileFormat" id="fileFormat" (change) = setFileFormat()>
            <option default>Select a number</option>
            <option value=".mp4">mp4</option>
            <option value=".mov">mov</option>
            <option value=".avi">avi</option>
            <option value=".mkv">mkv</option>
            <option value=".webm">webm</option>
          </select>
        </form>

        <div *ngIf = "numClips != 0; else showThis">

          <div>
              <button (click)="setStartTime()" > Start</button>
              <button (click)="setEndTime()"> End</button>
              <button (click)="reset()" > Reset</button>
          </div>

          <!-- <div *ngFor="let number of iterateNum">
              <h1>Start {{startTimes[number]}}</h1>
              <h1>End {{endTimes[number]}}</h1>
          </div> -->
        </div>
        <div style="color:aliceblue; padding: 15px; min-width:100px; display: inline-block">
          <table>
              <tr>
                <th>Trim Point</th>
                <ng-template ngFor let-number [ngForOf]="iterateNum" [ngForTrackBy]="trackByFn">
                  <th style = "text-align: center" >{{number+1}}</th>
                </ng-template>
              </tr>
            <tr>
              <td>Start Times</td>
              <ng-template ngFor let-number [ngForOf]="iterateNum" [ngForTrackBy]="trackByFn">
                <td>
                  <input _ngcontent-c1="" id="Start{{number+1}}" class="col-md-3" 
                  (change) ="changeStart(number, $event)" value = "{{startTimes[number]}}"/>
                </td>
              </ng-template>
            </tr>
            <tr>
              <td>End Times</td>
              <ng-template ngFor let-number [ngForOf]="iterateNum" [ngForTrackBy]="trackByFn">
                <td>
                  <input _ngcontent-c1="" id="End{{number+1}}" class="col-md-3" 
                  (change) ="changeEnd(number, $event)" value = "{{endTimes[number]}}"/>
                </td>
              </ng-template>
            </tr>
          </table>
        </div>

        <br>
          
        <div class="row">
          <button type="button" class="btn btn-outline-primary" (click)="videoEditor()">Trim Video</button>
          <a *ngIf = "stitchedVideo !== '';" href="{{stitchedVideo}}" target="_blank" download="video{{fileFormatValue}}">
            <button type="button" class="btn btn-outline-primary">Download</button>
          </a>
        </div>
        
      </div>	<!-- End ngcontent-c1="" class="container search-box" -->          
    </div>	<!-- End "download-box" -->
    
    <div class="row">
      <div class="col-md-12">
        <p [innerHTML]="featuredDetails.Result_Line"></p>
      </div>          
    </div>
    
  </div>	<!-- End class="row" -->
  </div>	<!-- End "outermost-container" -->
</div>	<!-- End *ngIf="showDetails && (!showradio) && (mediaType == 'Television' -->


<!-- Bookmark Menu -->
<div class="bookmark-menu" [class.open]="bookmarkMenuVisible">
  <h3>Bookmarked Sources</h3>
  <ul>
    <li *ngFor="let source of bookmarkedSources">
      {{ source.name }}
    </li>
  </ul>
  <!-- <button (click)="toggleBookmarkMenu()">Close</button> --> 
</div>

<!-- Email-Alerts-Setup Confirmation Modal -->
<div id="setupConfirmationModal" class="modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body confirmation-text">
        <h1>Email alert set.</h1>
        <p>Email alerts may be managed by clicking on "Email alerts" in the navigation bar at the top of the page.</p>
      </div>
      <button type="button" class="btn btn-outline-primary" data-dismiss="modal" (click)="newSearch()">Close</button>
    </div>
  </div>
</div>

<!-- Email-Alerts-Setup Error Modal -->
<div id="invalidSetupModal" class="modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body confirmation-text">
        Minimal email alert setup requires a search query, email address, and real time alert selection.
      </div>
      <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Okay</button>
    </div>
  </div>
</div>
