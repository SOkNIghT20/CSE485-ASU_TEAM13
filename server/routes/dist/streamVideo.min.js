"use strict";var fs=require("fs"),express=require("express"),router=express.Router(),path=require("path"),passport=require("passport");router.get("/stream",function(l,u,e){var g=l.query.file;console.log("streamVideo.js file_name:",g);var r=path.extname(g),v="";switch(r){case".mp4":v="video/mp4";break;case".vtt":v="text/vtt";break;case".wav":v="audio/wav"}console.log("looking"),fs.stat(g,function(e,r){if(e)return console.log("error in lebron:",e),"ENOENT"===e.code?u.status(404).send('Sorry: Video no longer archived - file not found at "'.concat(g,'".')):"EACCES"===e.code?u.status(403).send('Sorry: Video no longer archived - permission denied to access "'.concat(g,'".')):u.status(500).send('Sorry: Video no longer archived - an unexpected error occurred while accessing "'.concat(g,'".'));console.log("found "+g);var t=r.size,o=l.headers.range;if(o){var s=o.replace(/bytes=/,"").split("-"),a=parseInt(s[0],10),n=s[1]?parseInt(s[1],10):t-1,c=n-a+1;console.log("RANGE: "+a+" - "+n+" = "+c);var i=fs.createReadStream(g,{start:a,end:n}),d={"Content-Range":"bytes "+a+"-"+n+"/"+t,"Accept-Ranges":"bytes","Content-Length":c,"Content-Type":v};u.writeHead(206,d),i.pipe(u)}else{var p={"Content-Length":t,"Content-Type":v};u.writeHead(200,p),fs.createReadStream(g).pipe(u)}})}),module.exports=router;
//# sourceMappingURL=streamVideo.min.js.map
